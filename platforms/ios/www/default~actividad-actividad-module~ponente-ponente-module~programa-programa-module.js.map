{"version":3,"sources":["webpack:///./src/app/services/actividades.service.ts"],"names":[],"mappings":"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","file":"default~actividad-actividad-module~ponente-ponente-module~programa-programa-module.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { URL_SERVICIOS } from \"../config/url.servicios\";\nimport { AjustesService } from './ajustes.service';\nimport { DatosService } from './datos.service';\nimport 'rxjs/add/operator/map';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ActividadesService {\n  pagina: number = 0;\n  dia_actual: string;\n  dias: IDia[];\n  actividad: IActividad;\n  actsPonente: IActividad[];\n  constructor(\n    private http: HttpClient,\n    private _as: AjustesService,\n    private _ds: DatosService,\n  ) {\n    this.dia_actual = \"\";\n    this.dias = [];\n    this.actividad = null;\n  }\n\n\n\n  async cargar_todos() {\n    if (!this._as.online) {\n      this._as.presentLoading(\"Cargando...\", 0.5);\n      let promesa = this._ds.getActividades()\n        .then(\n          data => {\n            this.dias = data.dias;\n            this.dia_actual = data.diaactual;\n            this.pagina = 100;\n            this._as.loading.dismiss();\n            return promesa;\n          })\n        .catch(error => {\n          this._as.loading.dismiss();\n          return Promise.reject(error);\n        });\n\n    } else {\n      this._as.presentLoading(\"Cargando...\", 2.5);\n      let url = await URL_SERVICIOS + \"/minutoxminuto.php?todos&pagina=\" + this.pagina;\n      let promesa = this.http.get<InterfaceActividades>(url)\n        .toPromise()\n        .then(data => {\n          this.dias = data.dias;\n          this.dia_actual = data.diaactual;\n          this.pagina = this.pagina += 1;\n          this._as.loading.dismiss();\n          return promesa;\n        })\n        .catch(error => {\n          this._as.loading.dismiss();\n          return Promise.reject(error);\n        });\n    }\n  }\n\n  async getDetalles(id: any) {\n    this._as.presentLoading(\"Cargando...\", 0.5);\n    if (!this._as.online) {\n      let promesa = this._ds.getActividad(id)\n        .then(\n          data => {\n            this.actividad = data;\n            this._as.loading.dismiss();\n            return promesa;\n          })\n        .catch(error => {\n          this._as.loading.dismiss();\n          return Promise.reject(error);\n        });\n      return promesa;\n    } else {\n      let url = await URL_SERVICIOS + \"/actividad.php?id=\" + id;\n      let promesa = await this.http.get<IActividad>(url)\n        .toPromise()\n        .then(data => {\n          this.actividad = data[0];\n          this._as.loading.dismiss();\n          return promesa;\n        })\n        .catch(error => {\n          this._as.loading.dismiss();\n          return Promise.reject(error);\n        });\n      return promesa;\n    }\n  }\n\n\n\n  async buscar(variable: string) {\n    if (!this._as.online) {\n      variable = variable.toUpperCase();\n      this._as.presentLoading(\"Cargando...\", 1.5);\n      let promesa = this._ds.getActividades()\n        .then(\n          data => {\n            this.dias = [];\n            this.dia_actual = data.diaactual;\n            this.pagina = 0;\n\n            let dia_fecinido = false;\n            let nuevosdia: IDia[] = [];\n            let list: IDia[] = [];\n            list = data.dias;\n            list.forEach(\n              dia => {\n\n                let nuevasactividades: IActividad[] = [];\n                let hay_actividades_endia = false;\n                let listaactividades: IActividad[] = [];\n                listaactividades = dia.actividades;\n                listaactividades.forEach(\n                  actividad => {\n                    if (actividad.actividad.toUpperCase().indexOf(variable) >= 0 || actividad.descripcion.toUpperCase().indexOf(variable) >= 0 || actividad.temario.toUpperCase().indexOf(variable) >= 0 || actividad.categoria.toUpperCase().indexOf(variable) >= 0 || actividad.clave.toUpperCase().indexOf(variable) >= 0 || actividad.profesor.toUpperCase().indexOf(variable) >= 0) {\n                      nuevasactividades.push(actividad);\n                      hay_actividades_endia = true;\n                      if (!dia_fecinido) {\n                        dia_fecinido = true;\n                        this.dia_actual = dia.clave_dia;\n                      }\n                    }\n                  });\n                let ndia: IDia;\n                if (hay_actividades_endia) {\n                  let ndia: IDia={\n                    'actividades':nuevasactividades,\n                    'clave_dia':dia.clave_dia,\n                    'dia' : dia.dia\n                  }\n                  nuevosdia.push(ndia);\n                }\n              });\n\n              this.dias=nuevosdia;\n\n\n\n            this._as.loading.dismiss();\n            return promesa;\n          })\n        .catch(error => {\n          this._as.loading.dismiss();\n          return Promise.reject(error);\n        });\n    } else {\n      let url = await URL_SERVICIOS + \"/minutoxminuto.php?search=\" + variable;\n      let promesa = this.http.get<InterfaceActividades>(url)\n        .toPromise()\n        .then(data => {\n          this.dias = data.dias;\n          this.dia_actual = data.diaactual;\n          this.pagina = 0;\n          for (let d of this.dias) {\n            this.dia_actual = d.clave_dia;\n            break;\n          }\n          return promesa;\n        })\n        .catch(error => {\n          return Promise.reject(error);\n        });\n    }\n  }\n\n  async actividadesPonente(ponente: string) {\n    if (!this._as.online) {\n      this._as.presentLoading(\"Cargando...\", 2);\n      ponente = ponente.toUpperCase();\n      let promise = await this._ds.getActividades()\n        .then(\n          data => {\n            this.actsPonente = [];\n            let list: IDia[] = [];\n            list = data.dias;\n            list.forEach(\n              dia => {\n                let listaactividades: IActividad[] = [];\n                listaactividades = dia.actividades;\n                listaactividades.forEach(\n                  actividad => {\n                    let listaproresores: IProfesor[] = [];\n                    listaproresores = actividad.profesores;\n                    listaproresores.forEach(\n                      profesor => {\n                        if (profesor.profesor_id == ponente) {\n                          this.actsPonente.push(actividad);\n                        }\n                      });\n                  });\n              });\n            return promise;\n          }\n        );\n\n    } else {\n      let url = await URL_SERVICIOS + \"/actividadesprofesor.php?profesor=\" + ponente;\n      let promesa = this.http.get<IDia>(url)\n        .toPromise()\n        .then(data => {\n          console.log(data);\n          this.actsPonente = data.actividades;\n          return promesa;\n        })\n        .catch(error => {\n          return Promise.reject(error);\n        });\n    }\n  }\n\n\n\n\n\n\n}\n"],"sourceRoot":""}